{
  "openapi": "3.0.3",
  "info": {
    "title": "API DeGusto",
    "description": "APIs para el sistema de DeGusto",
    "contact": {
      "url": "https://www.linkedin.com/in/guillermo-yeltsin-baltodano-león-86938413b/"
    },
    "version": "1.0"
  },
  "externalDocs": {
    "description": "Más sobre Swagger",
    "url": "http://swagger.io"
  },
  "servers": [{ "url": "http://localhost:3000/api/" },{"url": "http://localhost:3000/"}],
  "tags": [
    {
        "name": "User",
        "description": "Modulo de Usuario"
      },
    {
      "name": "BusinessArea",
      "description": "Area/Tipo/Rubro de Negocio"
    },
    {
      "name": "Business",
      "description": "Modulo de Negocio"
    },
    {
      "name": "Owner",
      "description": "Modulo de Propietarios"
    },
    {
      "name": "Customer",
      "description": "Modulo de Clientes"
    },
    {
      "name": "Image",
      "description": "Modulo de Imágenes"
    },
    {
      "name": "Dish",
      "description": "Modulo de los platos"
    }
  ],
  "paths": {
    "/user/login":{
      "post": {
        "tags": [ "User" ],
        "summary": "Credenciales para iniciar sesión",
        "description": "",
        "operationId": "loginUser",
        "requestBody":{
            "content": {
                "application/json":{
                    "schema":{
                        "type": "object",
                        "properties": {
                            "userName":{
                                  "type": "string",
                                  "example":"prueba"
                              },
                              "userPassword":{
                                  "type": "string",
                                  "example":"123"
                                
                              }
                        }
                    }
                }
            }
        },
        "responses": {
          "200": {
            "description": "successful operation",
            "content": {
              "application/json": {
                "schema": {
                    "$ref": "#/components/schemas/User"
                }
              }
            }
          },
          "400": {
            "description": "Credenciales incorrectos",
            "content": {
                "application/json":{
                    "schema":{
                        "type": "object",
                        "properties": {
                            "message":{
                                "type": "string",
                                "example":"Usuario o contraseña incorrectos"
                            }
                        }
                    }
                }
            }
          },
          "403": {
            "description": "Usuario suspendido",
            "content": {
                "application/json":{
                    "schema":{
                        "type": "object",
                        "properties": {
                            "message":{
                                "type": "string",
                                "example":"Cuenta de usuario suspendido"
                            }
                        }
                    }
                }
            }
          }
        }
      }
    },
    "/user/register":{
        "post":{
            "tags": ["User"],
            "summary": "Crear cuenta del Usuario",
            "description": "Registrar al usuario",
            "operationId": "createUser",
            "requestBody": {
                "content": {
                    "application/json": {
                        "schema": {
                            "$ref": "#/components/schemas/Account"
                        }
                    }
                },
                "required": true
            },
            "responses": {
                "201": {
                    "description": "successful operation",
                    "content": {
                    "application/json": {
                        "schema": {
                        "$ref": "#/components/schemas/Users"
                        }
                    }
                    }
                },
                "400": {
                    "description": "Invalid input"
                },
                "422": {
                    "description": "Validation exception"
                }
            }
        }
    },
    "/user/logout":{
      "post": {
        "tags": [ "User" ],
        "summary": "Cerrar sesión",
        "description": "",
        "operationId": "logoutUser",
        "responses": {
          "200": {
            "description": "Sesión cerrada",
            "content": {
                "application/json":{
                    "schema":{
                        "type": "object",
                        "properties": {
                            "message":{
                                "type": "string",
                                "example":"Sesión cerrada"
                            }
                        }
                    }
                }
            }
          }
        }
      }
    },
    "/user": {
        "get":{
            "tags": [ "User" ],
            "summary": "Lista de todos los usuarios",
            "description": "Lista de los usuarios",
            "operationId": "getUsers",
            "parameters": [],
            "responses": {
                "200": {
                    "description": "successful operation",
                    "content": {
                        "application/json":{
                            "schema":{
                                "type": "array",
                                "items":{
                                    "$ref": "#/components/schemas/Users"
                                }
                            }
                        }
                    }
                },
                "404": {
                    "description": "No implementado"
                }
            }
        }
    },
    "/user/validateSession": {
        "get":{
            "tags": [ "User" ],
            "summary": "Verificar si la sesión del usuario esta activo",
            "description": "Sesión del usuarios",
            "operationId": "validateSession",
            "parameters": [],
            "responses": {
                "200": {
                    "description": "successful operation",
                    "content": {
                        "application/json":{
                            "schema":{
                                    "type": "object",
                                    "properties": {
                                        "id":{
                                            "type": "integer",
                                            "format": "int64",
                                            "example":0
                                        },
                                        "username":{
                                            "type": "string",
                                            "example":"alice_johnson"
                                        },
                                        "userStatus":{
                                            "type": "integer",
                                            "example":0
                                        },
                                        "iat":{
                                            "type": "integer",
                                            "example":0
                                        },
                                        "exp":{
                                            "type": "integer",
                                            "example":0
                                        }
                                    }
                                
                            }
                        }
                    }
                },
                "404": {
                    "description": "No implementado"
                },
                "403": {
                    "description": "Sesión no activa",
                    "content": {
                        "application/json":{
                            "schema":{
                                "type": "object",
                                "properties": {
                                    "message":{
                                        "type": "string",
                                        "example":"Sesión no activa"
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    },
    "/user/{id}":{
        "get":{
            "tags": [ "User" ],
            "summary": "Ver la cuenta del Usuario",
            "description": "Datos del usuario por Id",
            "operationId": "getUserById",
            "parameters": [
                {
                    "name": "id",
                    "in": "path",
                    "description": "ID del usuario a buscar",
                    "required": true,
                    "schema": {
                      "type": "integer",
                      "format": "int64"
                    }
                }
            ],
            "responses": {
                "200":{
                    "description": "successful operation",
                    "content": {
                        "application/json":{
                            "schema":{
                                "$ref": "#/components/schemas/Users"
                            }
                        }
                    }
                },
                "404": {
                    "description": "Propietario no encontrado"
                }
            }
        },
        "delete":{
            "tags": [ "User" ],
            "summary": "Eliminar la cuenta del usuario",
            "description": "Enviar el ID de la cuenta para eliminarlo",
            "operationId": "deleteUserById",
            "parameters": [
                {
                    "name": "id",
                    "in": "path",
                    "description": "ID del usuario a buscar",
                    "required": true,
                    "schema": {
                      "type": "integer",
                      "format": "int64"
                    }
                }
            ],
            "responses": {
                "200":{
                    "description": "successful operation",
                    "content": {
                        "application/json":{
                            "schema":{
                                "type": "boolean"
                            }
                        }
                    }
                },
                "404": {
                    "description": "Negocio no encontrado"
                }
            }
        }
    },
    "/businessareas": {
        "get": {
            "tags": [
                "BusinessArea"
            ],
            "summary": "Lista de las areas/tipos/rubros de negocios",
            "description": "Lista de las areas/tipos/rubros de negocios",
            "operationId": "getBusinessArea",
            "parameters": [],
            "responses": {
                "200": {
                    "description": "successful operation",
                    "content": {
                        "application/json":{
                            "schema":{
                                "type": "array",
                                "items":{
                                    "$ref":"#/components/schemas/BusinessArea"
                                }
                            }
                        }
                    }
                },
                "404": {
                    "description": "No implementado"
                }
            }
        }
    },
    "/business":{
        "get":{
            "tags": [
                "Business"
            ],
            "summary": "Lista de todos los negocios",
            "description": "Lista de todos los negocios",
            "operationId": "getBusiness",
            "parameters": [
                {
                    "name": "userId",
                    "in": "query",
                    "description": "Id del Usuario para ver sus negocios",
                    "required": true,
                    "schema": {
                        "type": "integer",
                        "example":0
                    }
                }
        ],
            "responses": {
                "200":{
                    "description": "successful operation",
                    "content": {
                        "application/json":{
                            "schema":{
                                "type": "array",
                                "items":{
                                    "$ref": "#/components/schemas/Business"
                                }
                            }
                        }
                    }
                },
                "400": {
                  "description": "Negocio no encontrado",
                  "content": {
                      "application/json":{
                          "schema":{
                              "type": "object",
                              "properties": {
                                  "message":{
                                      "type": "string",
                                      "example":"Usuario o contraseña incorrectos"
                                  }
                              }
                          }
                      }
                  }
                }
            }
        },
        "post":{
            "tags": ["Business"],
            "summary": "Crear Negocio",
            "description": "Registrar un negocio",
            "operationId": "createBusiness",
            "requestBody": {
                "content": {
                    "multipart/form-data": {
                        "schema": {
                            "$ref": "#/components/schemas/BusinessTwo"
                        }
                    }
                },
                "required": true
            },
            "responses": {
                "201": {
                    "description": "successful operation",
                    "content": {
                    "application/json": {
                        "schema": {
                        "$ref": "#/components/schemas/Business"
                        }
                    }
                    }
                },
                "400": {
                    "description": "Invalid input"
                },
                "422": {
                    "description": "Validation exception"
                }
            }
        }
    },
    "/business/mobile":{
        "get":{
            "tags": [
                "Business"
            ],
            "summary": "Lista de todos los negocios activos en la aplicación móvil",
            "description": "Lista de todos los negocios activos",
            "operationId": "getBusinessMobile",
            "responses": {
                "200":{
                    "description": "successful operation",
                    "content": {
                        "application/json":{
                            "schema":{
                                "type": "array",
                                "items":{
                                    "$ref": "#/components/schemas/Business"
                                }
                            }
                        }
                    }
                },
                "400": {
                  "description": "Negocio no encontrado",
                  "content": {
                      "application/json":{
                          "schema":{
                              "type": "object",
                              "properties": {
                                  "message":{
                                      "type": "string",
                                      "example":"Usuario o contraseña incorrectos"
                                  }
                              }
                          }
                      }
                  }
                }
            }
        }
    },
    "/business/{id}":{
        "get":{
            "tags": [
                "Business"
            ],
            "summary": "Obtener un negocio",
            "description": "Obtener los detalles de un negocio",
            "operationId": "getBusinessById",
            "parameters": [
                {
                    "name": "id",
                    "in": "path",
                    "description": "ID del negocio a buscar",
                    "required": true,
                    "schema": {
                      "type": "integer",
                      "format": "int64"
                    }
                }
            ],
            "responses": {
                "200":{
                    "description": "successful operation",
                    "content": {
                        "application/json":{
                            "schema":{
                                "$ref": "#/components/schemas/Business"
                            }
                        }
                    }
                },
                "404": {
                    "description": "Negocio no encontrado"
                }
            }
        },
        "delete":{
            "tags": [
                "Business"
            ],
            "summary": "Eliminar un negocio",
            "description": "Enviar el ID del negocio para eliminarlo",
            "operationId": "deleteBusinessById",
            "parameters": [
                {
                    "name": "id",
                    "in": "path",
                    "description": "ID del negocio a buscar",
                    "required": true,
                    "schema": {
                      "type": "integer",
                      "format": "int64"
                    }
                }
            ],"responses": {
                "200":{
                    "description": "successful operation",
                    "content": {
                        "application/json":{
                            "schema":{
                                "type": "boolean"
                            }
                        }
                    }
                },
                "404": {
                    "description": "Negocio no encontrado"
                }
            }
        },
        "put":{
            "tags": ["Business"],
            "summary": "Actualizar Negocio",
            "description": "Modificar un negocio",
            "operationId": "updateBusiness",
            "parameters": [
                {
                    "name": "id",
                    "in": "path",
                    "description": "ID del negocio a buscar",
                    "required": true,
                    "schema": {
                      "type": "integer",
                      "format": "int64"
                    }
                }
            ],
            "requestBody": {
                "content": {
                    "multipart/form-data": {
                        "schema": {
                            "$ref": "#/components/schemas/BusinessTwo"
                        }
                    }
                },
                "required": true
            },
            "responses": {
                "200": {
                    "description": "successful operation",
                    "content": {
                    "application/json": {
                        "schema": {
                        "$ref": "#/components/schemas/Business"
                        }
                    }
                    }
                },
                "400": {
                    "description": "Invalid input"
                },
                "422": {
                    "description": "Validation exception"
                }
            }
        }
    },
    "/business/states":{
        "get": {
            "tags": [
                "Business"
            ],
            "summary": "Lista de los tipos de estados para los negocios",
            "description": "Lista de los tipos de estados",
            "operationId": "getBusinessStatesList",
            "responses": {
                "200": {
                    "description": "successful operation",
                    "content": {
                        "application/json": {
                            "schema":{
                                "type": "object",
                                "properties": {
                                    "businessStatus":{
                                        "type": "integer",
                                        "example":1
                                    },
                                    "businessStatusName":{
                                        "type":"string",
                                        "example":"Solicitud"
                                    }
                                }
                            }
                        }
                    }
                },
                "404": {
                    "description": "No implementado"
                }
            }
        },
        "put":{
            "tags":["Business"],
            "summary":"Actualizar solo el estado del negocio",
            "description":"Enviar el valor del estado del negocio",
            "operationId":"updateBusinessState",
            "requestBody": {
                "content": {
                    "application/json": {
                        "schema":{
                            "type": "object",
                            "properties": {
                                "businessId":{
                                    "type": "integer",
                                    "format": "int64",
                                    "example":1
                                },
                                "businessStatus":{
                                    "type":"integer",
                                    "format": "int64",
                                    "example":2
                                }
                            }
                        }
                    }
                },
                "required": true
            },
            "responses": {
                "200": {
                    "description": "successful operation",
                    "content": {
                        "application/json": {
                            "schema":{
                                "type": "object",
                                "properties": {
                                    "businessId":{
                                        "type": "integer",
                                        "example":1
                                    },
                                    "businessStatus":{
                                        "type":"integer",
                                        "example":2
                                    }
                                }
                            }
                        }
                    }
                },
                "400": {
                    "description": "Valor invalido",
                    "content": {
                        "application/json": {
                            "schema":{
                                "type": "object",
                                "properties": {
                                    "message":{
                                        "type": "string",
                                        "example":"Valor de estado invalida."
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    },
    "/images/{root}/{name}/{type}/{image}":{
        "get":{
            "tags": [
                "Image"
            ],
            "summary": "Mostrar imagen",
            "description": "Agrega la ruta completa de la imagen a visualizar",
            "operationId": "getImagen",
            "parameters": [
                {
                    "name": "root",
                    "in": "path",
                    "description": "Ruta inicial",
                    "required": true,
                    "schema": {
                      "type": "string"
                    }
                },
                {
                    "name": "name",
                    "in": "path",
                    "description": "Nombre del Negocio",
                    "required": true,
                    "schema": {
                      "type": "string"
                    }
                },
                {
                    "name": "type",
                    "in": "path",
                    "description": "Tipo de imagen",
                    "required": true,
                    "schema": {
                      "type": "string"
                    }
                },
                {
                    "name": "image",
                    "in": "path",
                    "description": "Nombre de la imagen",
                    "required": true,
                    "schema": {
                      "type": "string"
                    }
                }
            ],
            "responses": {
                "200":{
                    "description": "successful operation",
                    "content": {
                        "imagen/*":{
                            "schema":{
                                "type": "string",
                                "format": "binary",
                                "example":"Va a cargar la imagen"
                            }
                        }
                    }
                }
            }
        }
    },
    "/images/upload":{
        "post":{
            "tags": ["Image"],
            "summary": "Guardar Imagen",
            "description": "Es para hacer pruebas de guardar image",
            "operationId": "saveImage",
            "requestBody": {
                "content": {
                    "multipart/form-data": {
                        "schema": {
                            "type": "object",
                            "properties": {
                                "businessName":{
                                    "type": "string",
                                    "example":"La Buena Mesa"
                                },
                                "businessAddress":{
                                    "type": "string",
                                    "example":"123 Gourmet Street"
                                },
                                "businessPhoneNumber":{
                                    "type": "string",
                                    "example":"123456789"
                                },
                                "file": {
                                    "type": "string",
                                    "format": "binary",
                                    "description": "La imagen a subir"
                                }
                            },
                            "required": ["file", "businessName", "businessAddress","businessPhoneNumber"]
                        }
                    }
                },
                "required": true
            },
            "responses": {
                "201": {
                    "description": "successful operation",
                    "content": {
                    "application/json": {
                        "schema": {
                        "$ref": "#/components/schemas/Business"
                        }
                    }
                    }
                },
                "400": {
                    "description": "Invalid input"
                },
                "422": {
                    "description": "Validation exception"
                }
            }
        }
    },
    "/dish/dishCategory":{
        "get":{
            "tags": [ "Dish" ],
            "summary": "Lista de todas las categorías de los platos",
            "description": "Lista de las primeras 5 categorías de los platos más vendidos",
            "operationId": "getDishCategory",
            "parameters": [],
            "responses": {
                "200": {
                    "description": "successful operation",
                    "content": {
                        "application/json":{
                            "schema":{
                                "type": "array",
                                "items":{
                                    "$ref": "#/components/schemas/CategoryDish"
                                }
                            }
                        }
                    }
                },
                "404": {
                    "description": "No implementado"
                }
            }
        }
    },
    "/dish/popular/{dishCategoryId}":{
        "get":{
            "tags": [ "Dish" ],
            "summary": "Lista de los platos mas populares",
            "description": "Lista de los 5 platos más vendidos por su categoría",
            "operationId": "getPopularDish",
            "parameters": [
                {
                    "name": "dishCategoryId",
                    "in": "path",
                    "description": "ID de la categoría del plato",
                    "required": true,
                    "schema": {
                      "type": "integer",
                      "format": "int64"
                    }
                }
            ],
            "responses": {
                "200": {
                    "description": "successful operation",
                    "content": {
                        "application/json":{
                            "schema":{
                                "type": "array",
                                "items":{
                                    "$ref": "#/components/schemas/Dish"
                                }
                            }
                        }
                    }
                },
                "404": {
                    "description": "No implementado"
                }
            }
        }
    }
  },
  "components": {
    "schemas": {
        "User":{
            "type": "object",
            "properties": {
                "userId":{
                    "type": "integer",
                    "example":0
                },
                "userName":{
                    "type": "string",
                    "example":"prueba"
                },
                "userStatus":{
                    "type": "integer",
                    "example":0
                }
            }
        },
        "BusinessArea":{
            "type": "object",
            "properties": {
                "businessAreaId":{
                    "type": "integer",
                    "format": "int64",
                    "example":0
                },
                "businessAreaName":{
                    "type": "string",
                    "example":"Restaurante"
                }
            }
        },
        "Business":{
            "type": "object",
            "properties": {
                "businessId":{
                    "type": "integer",
                    "format": "int64",
                    "example":0
                },
                "businessName":{
                    "type": "string",
                    "example":"La Buena Mesa"
                },
                "businessAddress":{
                    "type": "string",
                    "example":"123 Gourmet Street"
                },
                "businessPhoneNumber":{
                    "type": "string",
                    "example":"123456789"
                },
                "businessStatus":{
                    "type": "integer",
                    "format": "int64",
                    "example":1
                },
                "businessLogo":{
                    "type": "string",
                    "example":"restaurant_logo.png"
                },
                "businessLatitude":{
                    "type": "integer",
                    "format": "int64",
                    "example": 40.712776
                },
                "businessLongitude":{
                    "type": "integer",
                    "format": "int64",
                    "example": -74.005974
                },
                "business_AreaId": {
                    "type": "integer",
                    "format": "int64",
                    "example": 1
                },
                "business_UserId": {
                    "type": "integer",
                    "format": "int64",
                    "example": 1
                }
            }
        },
        "Users":{
            "type": "object",
            "properties": {
                "userId":{
                    "type": "integer",
                    "format": "int64",
                    "example":0
                },
                "userName":{
                    "type": "string",
                    "example":"alice_johnson"
                },
                "personName":{
                    "type": "string",
                    "example":"Alice Johnson"
                },
                "personEmail":{
                    "type": "string",
                    "example":"alicej@example.com"
                },
                "personPhoneNumber":{
                    "type": "string",
                    "example":"123456789"
                },
                "personTypeName":{
                    "type": "string",
                    "example":"Customer"
                },
                "userStatus":{
                    "type": "integer",
                    "example":1
                },
                "userCreatedAt":{
                    "type": "string",
                    "example":"01/09/2024"
                }
            }
        },
        "Account":{
            "type": "object",
            "properties": {
                "personTypeId":{
                    "type": "integer",
                    "format": "int64",
                    "example":1
                },
                "name":{
                    "type": "string",
                    "example":"Alice Johnson"
                },
                "email":{
                    "type": "string",
                    "example":"alicej@example.com"
                },
                "phoneNumber":{
                    "type": "string",
                    "example":"123456789"
                },
                "userName":{
                    "type": "string",
                    "example":"alice_johnson"
                },
                "password":{
                    "type": "string",
                    "example":"123"
                },
                "createDate":{
                    "type": "string",
                    "example":"01/09/2024"
                }
            }
        },
        "BusinessTwo":{
            "type": "object",
            "properties": {
                "businessName":{
                    "type": "string",
                    "example":"La Buena Mesa"
                },
                "businessAddress":{
                    "type": "string",
                    "example":"123 Gourmet Street"
                },
                "businessPhoneNumber":{
                    "type": "string",
                    "example":"123456789"
                },
                "businessStatus":{
                    "type": "integer",
                    "format": "int64",
                    "example":1
                },
                "businessLogo":{
                    "type": "string",
                    "example":"restaurant_logo.png"
                },
                "businessLatitude":{
                    "type": "integer",
                    "format": "int64",
                    "example": 40.712776
                },
                "businessLongitude":{
                    "type": "integer",
                    "format": "int64",
                    "example": -74.005974
                },
                "business_AreaId": {
                    "type": "integer",
                    "format": "int64",
                    "example": 1
                },
                "business_OwnerId": {
                    "type": "integer",
                    "format": "int64",
                    "example": 1
                },
                "file": {
                    "type": "string",
                    "format": "binary",
                    "description": "La imagen a subir"
                }
            },
            "required": ["file", "businessName", "businessAddress","businessPhoneNumber",
        "businessStatus","businessLatitude","businessLongitude","business_AreaId","business_OwnerId"]
        },
        "CategoryDish":{
            "type": "object",
            "properties": {
                "dishCategoryID":{
                    "type": "integer",
                    "format": "int64",
                    "example":0
                },
                "dishCategoryName":{
                    "type": "string",
                    "example":"Bebida"
                }
            }
        },
        "Dish":{
            "type": "object",
            "properties": {
                "dishId": {
                    "type": "integer",
                    "format": "int64",
                    "example": 0
                },
                "dishName":{
                    "type": "string",
                    "example":"Tallarín con pollo"
                },
                "dishDescription":{
                    "type": "string",
                    "example":"Descripción de lo que lleva el plato"
                },
                "dishPrice":{
                    "type": "number",
                    "example":20.00
                },
                "dishPhoto":{
                    "type": "string",
                    "example":"Ruta final donde esta almacenada la imagen"
                }
            }
        }
    }
  }
}
